!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(n){"use strict";n(document);function s(t,i){if(this.image=t,this.$image=n(t),this.settings=n.extend({},h,i),this.params={image:{width:null,height:null},container:{width:null,height:null},ratios:{image:null,container:null}},"parent"===this.settings.container)this.$container=this.$image.parent();else{if(!(this.settings.container instanceof jQuery&&this.settings.container.length))return void this.log("The container is missing.");this.$container=this.settings.container}this.id=this.uuid(),this.init()}var e=n(window),a="fsr-container",r="fsr-image",o="fsr-hidden",h={useCSS:!0,container:"parent",position:{x:"center",y:"center"},throttleTimeout:100},t="backgroundSize"in document.createElement("div").style;(s.fn=s.prototype).init=function(){if(this.$image.addClass(r),this.$container.addClass(a),t&&this.settings.useCSS)this.setBackground();else{if(t&&this.settings.useCSS)return void this.log("No resize method.");this.listen(),this.resize()}},s.fn.setBackground=function(){var t=this.$image,i=this.$container,e=this.settings.position;t.addClass(o),i.css({"background-image":"url("+t[0].src+")","background-position":e.x+" "+e.y})},s.fn.listen=function(){var t=this;e.on("resize."+this.id+" orientationchange."+this.id,this.throttle(function(){t.resize()},this.settings.throttleTimeout))},s.fn.resize=function(){this.calcRatios(),this.update()},s.fn.calcRatios=function(){var t,i,e,n,s=this.$image,a=this.$container,r=this.params;if(!r.ratios.image){if(!s.attr("width")||!s.attr("height"))return void this.log("The image should have width/height attributes.");t=parseInt(s.attr("width"),10),i=parseInt(s.attr("height"),10),r.ratios.image=i/t,r.image.width=t,r.image.height=i}e=a.width(),n=a.height(),r.ratios.container=n/e,r.container.width=e,r.container.height=n},s.fn.update=function(){var t=this.$image,i=this.params.ratios,e=this.params.container,n=this.settings,s={width:0,height:0,top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(i.image<i.container?(s.width=e.height/i.image,s.height=e.height):(s.width=e.width,s.height=e.width*i.image),n.position.y){case"top":s.top=0;break;case"bottom":s.bottom=0;break;case"center":s.top=(e.height-s.height)/2;break;default:return void this.log("The vertical position cannot be calculated.")}switch(n.position.x){case"left":s.left=0;break;case"right":s.right=0;break;case"center":s.left=(e.width-s.width)/2;break;default:return void this.log("The horizontal position cannot be calculated.")}t.css(s)},s.fn.destroy=function(){var t=this.$image,i=this.$container;t.removeClass(o).removeClass(r).removeAttr("style"),i.removeClass(a).removeAttr("style"),e.off("resize."+this.id+" orientationchange."+this.id),t.removeData("fullscreener")},s.fn.throttle=function(e,n,s){function a(){l=0==s.leading?0:new Date,c=null,h=e.apply(r,o)}var r,o,h,c=null,l=0;s=s||{};return function(){var t,i=new Date;return l||0!=s.leading||(l=i),r=this,o=arguments,(t=n-(i-l))<=0?(clearTimeout(c),c=null,l=i,h=e.apply(r,o)):c||0==s.leading||(c=setTimeout(a,t)),h}},s.fn.uuid=function(){return"fsr"+parseInt((new Date).getTime()/1e3,10)},s.fn.log=function(t){alert("Fullscreener "+t)},n.fn.fullscreener=function(e){return this.each(function(){var t=n(this),i=t.data("fullscreener");i?"string"==typeof e&&(i[e]?i[e]():s.fn.log("No valid method.")):"string"!=typeof e&&t.data("fullscreener",new s(this,e))})}});